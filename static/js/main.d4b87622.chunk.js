(this.webpackJsonpshadowloop=this.webpackJsonpshadowloop||[]).push([[0],{605:function(e,t){},626:function(e,t,c){"use strict";c.r(t);c(199),c(210),c(211),c(212),c(213),c(214),c(215),c(216),c(217),c(218),c(219),c(220),c(221),c(222),c(223),c(288),c(290),c(291),c(292),c(293),c(294),c(296),c(227),c(299),c(300),c(136),c(304),c(306),c(307),c(308),c(309),c(310),c(311),c(314),c(315),c(316),c(317),c(318),c(319),c(234),c(320),c(322),c(324),c(325),c(326),c(327),c(328),c(329),c(330),c(331),c(332),c(333),c(334),c(335),c(336),c(337),c(238),c(338),c(339),c(340),c(341),c(342),c(343),c(344),c(345),c(347),c(349),c(351),c(352),c(353),c(354),c(355),c(357),c(358),c(359),c(360),c(361),c(362),c(363),c(364),c(365),c(366),c(367),c(368),c(369),c(370),c(371),c(240),c(372),c(373),c(374),c(375),c(381),c(382),c(383),c(384),c(385),c(386),c(388),c(389),c(390),c(391),c(392),c(393),c(394),c(395),c(396),c(246),c(400),c(402),c(403),c(404),c(405),c(406),c(407),c(168),c(408),c(409),c(413),c(414),c(415),c(416),c(417),c(418),c(419),c(420),c(421),c(423),c(425),c(431),c(432),c(433),c(434),c(435),c(436),c(437),c(438),c(439),c(440),c(441),c(442),c(443),c(444),c(445),c(446),c(447),c(448),c(449),c(450),c(451),c(452),c(453),c(454),c(455),c(456),c(457),c(458),c(459),c(460),c(461),c(462),c(463),c(465),c(466),c(253),c(469),c(470),c(471),c(474),c(475),c(550),c(558);var n=c(0),a=c.n(n),r=c(27),i=c.n(r),s=c(72),o=c(31),l=c(659),j=c(660),u=c(630),d=c(658),b=c(84),h=c.n(b),O=c(494),p=c(682),x=c(657),f=c(661),m=c(662),v=c(2),g=h()((function(e){return{offset:e.mixins.toolbar,feedback:{marginLeft:"auto"}}})),k=Object(O.a)();function w(e){var t=e.children,c=g();return Object(v.jsxs)(x.a,{theme:k,children:[Object(v.jsx)(d.a,{}),Object(v.jsx)(l.a,{children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(s.b,{to:"/",style:{textDecoration:"none",color:"unset"},children:Object(v.jsx)(u.a,{variant:"h6",component:"h1",children:"Shadow loop"})}),Object(v.jsx)("a",{href:"https://forms.gle/eazWsMhDGNhrhAXA7",style:{textDecoration:"none",color:"unset"},className:c.feedback,children:Object(v.jsx)(f.a,{color:"inherit",children:Object(v.jsx)(m.a,{})})})]})}),Object(v.jsx)("div",{className:c.offset}),t]})}k=Object(p.a)(k);var S=c(23),y=c(17),L=c(670),N=c(191),C=c(673),D=c(491),A=c.n(D),E=c(261),W=c(671),z=c(672),T=c(663),M=c(664),P=c(667),B=c(666),F=c(668),I=c(665),R=Object(T.a)({root:{minWidth:275}});function q(e){var t=e.category,c=e.name,n=e.url,a=e.isArchived,r=e.onArchive,i=R();return Object(v.jsxs)(M.a,{className:i.root,variant:"outlined",children:[Object(v.jsx)(I.a,{component:s.b,to:"decks/".concat(n),children:Object(v.jsxs)(B.a,{children:[Object(v.jsx)(u.a,{variant:"overline",color:"textSecondary",children:t}),Object(v.jsx)(u.a,{variant:"h5",component:"h2",children:c})]})}),Object(v.jsxs)(P.a,{children:[Object(v.jsx)(F.a,{size:"small",color:"secondary",component:s.b,to:"decks/".concat(n),children:"Spustit"}),Object(v.jsx)(F.a,{size:"small",color:"secondary",onClick:r,children:a?"Vyjmout z archivu":"Archivovat"})]})]})}var _=c(669),H=Object(T.a)({root:{minWidth:275}});function J(){var e=H(),t=Object(n.useState)(Object(S.a)(Array(Math.floor(11*Math.random())+10)).map((function(){return"a"})).join(""));return Object(v.jsxs)(M.a,{className:e.root,variant:"outlined",children:[Object(v.jsxs)(B.a,{children:[Object(v.jsx)(_.a,{children:Object(v.jsx)(u.a,{variant:"overline",color:"textSecondary",children:"Z\xe1kladn\xed bal\xed\u010dek"})}),Object(v.jsx)(_.a,{children:Object(v.jsx)(u.a,{variant:"h5",component:"h2",children:t[0]})})]}),Object(v.jsxs)(P.a,{children:[Object(v.jsx)(_.a,{children:Object(v.jsx)(F.a,{size:"small",color:"secondary",children:"Spustit"})}),Object(v.jsx)(_.a,{children:Object(v.jsx)(F.a,{size:"small",color:"secondary",children:"Archivovat"})})]})]})}var U=h()((function(e){return{decksList:{paddingTop:e.spacing(2)},deckWrapper:{paddingBottom:e.spacing(2)},archiveTitleWrapper:{width:"100%",paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},archiveTitle:{width:"100%",padding:e.spacing(1)},archiveTitleIcon:{paddingLeft:e.spacing(1),marginTop:e.spacing(1)}}}));var G=function(){var e=U(),t=Object(n.useState)([]),c=Object(y.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)([]),s=Object(y.a)(i,2),l=s[0],j=s[1],d=Object(E.useLocalStorage)("archivedDecks",[]),b=Object(y.a)(d,2),h=b[0],O=b[1],p=Object(E.useLocalStorage)("hiddenDecks",[]),x=Object(y.a)(p,2),f=x[0],m=x[1],g=Object(n.useState)(!0),k=Object(y.a)(g,2),w=k[0],D=k[1],T=Object(o.g)();Object(n.useEffect)((function(){var e=A.a.parse(T.location.search,{ignoreQueryPrefix:!0}).newDeck;if(e){var t=e.split(",");m(Object(S.a)(new Set([].concat(Object(S.a)(f),Object(S.a)(t))))),T.push(T.location.pathname)}}),[f,T,m]),Object(n.useEffect)((function(){r((function(e){return Object(S.a)(new Set([].concat(Object(S.a)(e),Object(S.a)(f))))}))}),[f]);var M=Object(n.useState)(!0),P=Object(y.a)(M,2),B=P[0],F=P[1];return Object(n.useEffect)((function(){fetch("".concat("/decks","/decks.txt")).then((function(e){return e.text()})).then((function(e){var t=e.split("\n").slice(0,-1);r((function(e){return Object(S.a)(new Set([].concat(Object(S.a)(e),Object(S.a)(t))))})),F(!1)}),(function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){j(a.filter((function(e){return!h.includes(e)})))}),[a,h]),Object(v.jsx)(L.a,{className:e.decksList,children:B?Object(v.jsx)(v.Fragment,{children:Object(S.a)(Array(4).keys()).map((function(t){return Object(v.jsx)("div",{className:e.deckWrapper,children:Object(v.jsx)(J,{})},t)}))}):Object(v.jsxs)(v.Fragment,{children:[l.sort().map((function(t){return Object(v.jsx)("div",{className:e.deckWrapper,children:Object(v.jsx)(q,{category:t.split("_")[0],name:t.split("_")[1],url:t,isArchived:!1,onArchive:function(){return e=t,j(l.filter((function(t){return t!==e}))),void O(Object(S.a)(new Set([].concat(Object(S.a)(h),[e]))));var e}})},t)})),0!==h.length&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:e.archiveTitleWrapper,children:Object(v.jsxs)(N.a,{className:e.archiveTitle,onClick:function(){return D(!w)},children:[Object(v.jsx)(u.a,{variant:"h5",component:"h2",children:"Archivovan\xe9 bal\xed\u010dky"}),Object(v.jsx)("div",{className:e.archiveTitleIcon,children:w?Object(v.jsx)(W.a,{}):Object(v.jsx)(z.a,{})})]})}),Object(v.jsx)(C.a,{in:!w,timeout:"auto",children:h.sort().map((function(t){return Object(v.jsx)("div",{className:e.deckWrapper,children:Object(v.jsx)(q,{category:t.split("_")[0],name:t.split("_")[1],url:t,isArchived:!0,onArchive:function(){return e=t,O(h.filter((function(t){return t!==e}))),void j(Object(S.a)(new Set([].concat(Object(S.a)(l),[e]))));var e}})},t)}))})]})]})})};var Q=function(){return Object(v.jsx)(v.Fragment,{children:"Error 404 :("})},V=c(147),X=c(262),Z=c(492),K=c(683),Y=c(493),$=c.n(Y),ee=c(674),te=c(675),ce=Object(T.a)((function(e){return{wrapper:{padding:e.spacing(2),maxWidth:"100vw",overflowWrap:"anywhere",hyphens:"auto"},card:{width:"fit-content"},mediaWrapper:{width:"100%"},media:{maxWidth:"100%"},loopButton:{float:"right",paddingBottom:e.spacing(2),paddingLeft:e.spacing(2)}}}));function ne(e){var t=e.slideContent,c=e.deckUrl,a=e.onSlideFinished,r=e.isSlidePlaying,i=e.czechLabelShown,s=e.englishLabelShown,o=e.pauseDurationMultiplier,l=ce(),j=Object(n.useRef)(2),d=Object(y.a)(t,4),b=d[0],h=d[1],O=d[2],p=d[3],x=Object(n.useState)(0),f=Object(y.a)(x,2),m=f[0],g=f[1],k=Object(n.useRef)(m),w=Object(n.useState)(!1),S=Object(y.a)(w,2),L=S[0],N=S[1],C=Object(n.useState)(!0),D=Object(y.a)(C,2),A=D[0],E=D[1],W=Object(n.useState)(!1),z=Object(y.a)(W,2),T=z[0],P=z[1],F=Object(n.useRef)(0);return Object(n.useEffect)((function(){g(0),k.current=0,P(!1),clearTimeout(F.current)}),[t]),Object(n.useEffect)((function(){E(r&&!T)}),[r,T]),Object(n.useEffect)((function(){r&&k.current>2&&!L&&a()}),[r,L,a,m]),Object(v.jsx)("div",{className:l.wrapper,children:Object(v.jsxs)(M.a,{className:l.card,children:[Object(v.jsx)(K.a,{className:l.mediaWrapper,display:"flex",justifyContent:"center",children:Object(v.jsx)("img",{className:l.media,src:"".concat("/decks","/").concat(c,"/").concat(p),alt:b})}),Object(v.jsxs)(B.a,{children:[Object(v.jsx)("div",{className:l.loopButton,children:Object(v.jsx)(ee.a,{value:"repeat",selected:L,onChange:function(){return N(!L)},children:Object(v.jsx)(te.a,{})})}),(s||i)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(u.a,{gutterBottom:!0,variant:"h5",component:"h2",children:s?b:h}),s&&i&&Object(v.jsx)(u.a,{variant:"body2",color:"textSecondary",component:"p",children:h})]})]}),Object(v.jsx)($.a,{url:"".concat("/decks","/").concat(c,"/").concat(O),playing:A,width:0,height:0,onEnded:function(){P(!0),F.current=setTimeout((function(){k.current+=1,g(k.current),P(!1)}),1e3*j.current*o)},onDuration:function(e){j.current=e}})]})})}var ae=Object(T.a)((function(e){return{wrapper:{padding:e.spacing(2),maxWidth:"100vw"},media:{width:"500px",paddingTop:"57%"}}}));function re(){var e=ae();return Object(v.jsx)("div",{className:e.wrapper,children:Object(v.jsxs)(M.a,{children:[Object(v.jsx)(_.a,{variant:"rect",children:Object(v.jsx)("div",{className:e.media})}),Object(v.jsxs)(B.a,{children:[Object(v.jsx)(_.a,{children:Object(v.jsx)(u.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"Lorem ipsum dolor sit amet"})}),Object(v.jsx)(_.a,{children:Object(v.jsx)(u.a,{variant:"body2",color:"textSecondary",component:"p",children:"Lorem ipsum dolor"})})]})]})})}var ie=c(495),se=c(684),oe=c(680),le=c(686),je=c(681),ue=c(687),de=c(676),be=c(677),he=c(678),Oe=c(679),pe=c(685),xe=h()((function(e){return{root:{margin:0,padding:e.spacing(2)},box:{paddingTop:"20px"},slider:{marginLeft:"15px",marginRight:"15px",marginTop:"10px"}}}));function fe(e){var t=e.isPlaying,c=e.onResumePauseClick,n=e.onSlide,a=e.maxSlide,r=e.onSlideChange,i=e.czechLabelShown,s=e.setCzechLabelShown,o=e.englishLabelShown,l=e.setEnglishLabelShown,j=e.pauseDurationMultiplier,u=e.setPauseDurationMultiplier,d=xe();return Object(v.jsx)(ie.a,{square:!0,className:d.root,children:Object(v.jsx)(L.a,{children:Object(v.jsxs)(K.a,{className:d.box,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(v.jsxs)(K.a,{display:"flex",width:"100%",children:[Object(v.jsx)(f.a,{onClick:c,children:t?Object(v.jsx)(de.a,{}):Object(v.jsx)(be.a,{})}),Object(v.jsx)(se.a,{className:d.slider,min:0,max:a-1,value:n,onChange:r,valueLabelDisplay:"on",valueLabelFormat:function(e){return e+1}})]}),Object(v.jsxs)(he.a,{row:!0,children:[Object(v.jsx)(Oe.a,{control:Object(v.jsx)(pe.a,{checked:o,onChange:function(e){return l(e.target.checked)},color:"primary"}),label:"Anglicky"}),Object(v.jsx)(Oe.a,{control:Object(v.jsx)(pe.a,{checked:i,onChange:function(e){return s(e.target.checked)},color:"primary"}),label:"\u010cesky"}),Object(v.jsxs)(oe.a,{variant:"outlined",children:[Object(v.jsx)(le.a,{id:"pause-label",children:"Pauza"}),Object(v.jsxs)(je.a,{labelId:"pause-label",label:"Pauza",value:j,onChange:function(e){return u(e.target.value)},children:[Object(v.jsx)(ue.a,{value:1,children:"1\xd7"}),Object(v.jsx)(ue.a,{value:1.5,children:"1,5\xd7"}),Object(v.jsx)(ue.a,{value:2,children:"2\xd7"})]})]})]})]})})})}var me=h()((function(){return{root:{"@media (min-width:0px) and (orientation: landscape)":{minHeight:"calc(100vh - 48px)"},"@media (min-width:600px)":{minHeight:"calc(100vh - 64px)"},minHeight:"calc(100vh - 56px)"}}}));function ve(e){for(var t=e.length-1;t>0;t--){var c=Math.floor(Math.random()*(t+1)),n=[e[c],e[t]];e[t]=n[0],e[c]=n[1]}}var ge=function(){var e=me(),t=Object(o.h)().deck,c=Object(n.useState)([]),a=Object(y.a)(c,2),r=a[0],i=a[1],s=Object(n.useState)(0),l=Object(y.a)(s,2),j=l[0],u=l[1],d=Object(n.useState)(!0),b=Object(y.a)(d,2),h=b[0],O=b[1],p=Object(n.useState)(!0),x=Object(y.a)(p,2),f=x[0],m=x[1],g=Object(n.useState)(!0),k=Object(y.a)(g,2),w=k[0],S=k[1],L=Object(n.useState)(!0),N=Object(y.a)(L,2),C=N[0],D=N[1],A=Object(n.useState)(1.5),E=Object(y.a)(A,2),W=E[0],z=E[1];return Object(n.useEffect)((function(){Object(Z.a)("".concat("/decks","/").concat(t,"/").concat(t,".csv"),{download:!0,complete:function(){var e=Object(X.a)(Object(V.a)().mark((function e(c){var n,a,r,s;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.data.slice(0,-1),e.next=3,fetch("".concat("/decks","/").concat(t,"/props.json")).then((function(e){return e.json()})).catch((function(){return!1}));case 3:a=e.sent,r=!0,a&&"shuffle"in a&&(r=a.shuffle),r&&ve(n),i(n),(s=new Image).src="".concat("/decks","/").concat(t,"/").concat(n[1][3]),s.onload=function(){return O(!1)};case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),[t]),Object(n.useEffect)((function(){h||j+1<r.length&&((new Image).src="".concat("/decks","/").concat(t,"/").concat(r[j+1][3]),(new Audio).src="".concat("/decks","/").concat(t,"/").concat(r[j+1][2]))}),[r,t,h,j]),Object(n.useEffect)((function(){var e=null;function t(){return(t=Object(X.a)(Object(V.a)().mark((function e(){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.wakeLock.request("screen");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log("".concat(e.t0.name,", ").concat(e.t0.message)),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return function(){return t.apply(this,arguments)}().then((function(t){t?(console.log("wakelock acquired"),e=t):console.log("could not acquire wakelock")})),function(){e&&(console.log("releasing wakelock"),e.release())}}),[]),Object(v.jsxs)(K.a,{className:e.root,display:"flex",flexDirection:"column",children:[Object(v.jsx)(K.a,{flex:"1",children:Object(v.jsx)(K.a,{display:"flex",children:Object(v.jsx)(K.a,{m:"auto",children:h?Object(v.jsx)(re,{}):Object(v.jsx)(ne,{slideContent:r[j],deckUrl:t,onSlideFinished:function(){j+1<r.length?u(j+1):m(!1)},isSlidePlaying:f,czechLabelShown:w,englishLabelShown:C,pauseDurationMultiplier:W})})})}),Object(v.jsx)(fe,{isPlaying:f,onResumePauseClick:function(){return m(!f)},onSlide:h?1:j,maxSlide:h?1:r.length,onSlideChange:function(e,t){return u(t)},czechLabelShown:w,setCzechLabelShown:S,englishLabelShown:C,setEnglishLabelShown:D,pauseDurationMultiplier:W,setPauseDurationMultiplier:z})]})};var ke=function(){return Object(v.jsx)(s.a,{basename:"/shadowloop-old",children:Object(v.jsx)(w,{children:Object(v.jsxs)(o.d,{children:[Object(v.jsx)(o.b,{exact:!0,path:"/",children:Object(v.jsx)(G,{})}),Object(v.jsx)(o.b,{exact:!0,path:"/decks",children:Object(v.jsx)(o.a,{to:"/"})}),Object(v.jsx)(o.b,{exact:!0,path:"/decks/:deck",children:Object(v.jsx)(ge,{})}),Object(v.jsx)(o.b,{children:Object(v.jsx)(Q,{})})]})})})};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(ke,{})}),document.getElementById("root"))}},[[626,1,2]]]);
//# sourceMappingURL=main.d4b87622.chunk.js.map